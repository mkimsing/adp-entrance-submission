<!DOCTYPE html>
<html>
  <head>
    <title>Quiz Results</title>

    <script src="C:\Users\MKS\Documents\adp-entrance\jquery-3.3.1.min.js"></script>

    <style>
      .title{
        text-align:center;
      }

      #score{
        text-align:center;
      }

      #verdict{
        text-align:center;
      }

      .pass{
        color:green;
      }

      .fail{
        color:darkred;
        font-family:courier;
      }

      body{
        background-color:bisque;
      }
    </style>

    <script>
      function returnToWelcome(){
        location.href = "quiz-welcome.html";
      }

      function displayScoreResults(){
        var textLen = " score=".length;
        var cookieItems = document.cookie.split(";");
        var currentScore = cookieItems[1].substring(textLen, cookieItems[1].length);

        textLen = "quiz=".length;
        var quizNum = cookieItems[0].substring(textLen, cookieItems[0].length);

        $.getJSON("quiz.json", function(data){
          var total = data.quizzes[quizNum].questions.length;
          var scoreString = currentScore + " / " + total;
          var percentage = (Number(currentScore)/Number(total)*100).toFixed(2);
          var percentageString = "This is " + percentage + "% correct";
          document.getElementById("score").innerHTML = scoreString + "<br>"+ percentageString;

          var quizName;
          if(Number(quizNum) === 0){
            quizName = "Abstract Quiz";
          }
          else if(Number(quizNum) === 1){
            quizName = "Developer Quiz";
          }

          if(percentage > 50){
            document.getElementById("verdict").innerHTML = " Congrats! You passed the " + quizName;
            document.getElementById("verdict").className = "pass";
          }
          else{
            document.getElementById("verdict").innerHTML = " Sorry, you failed the " + quizName;
            document.getElementById("verdict").className = "fail";
          }
        });
      }

      function clearCookie(){
        document.cookie = 'quiz=; score=; question=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/'
      }

    </script>
  </head>

  <body>
    <button id = "return-button" onclick = "returnToWelcome()"> Back To Quiz Select </button>
    <h1 class = "title"> QUIZ RESULTS</h1>

    <h3 class = "title"> You Scored... </h3>
    <h3 id = "score"> <!-- Dynamically Add Score Here--> </h3>
    <h2 id = "verdict"> <!-- Dynamically Add Verdict Here--></h4>
    <script>
      displayScoreResults();
      clearCookie();
    </script>

  </body>
</html>